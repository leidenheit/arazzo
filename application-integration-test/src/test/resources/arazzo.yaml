arazzo: 1.0.0
info:
  title: A cookie eating workflow
  summary: This Arazzo Description showcases the workflow for how to eat a cookie through a sequence of API calls
  description: |
    This Arazzo Description walks you through the workflow and steps of `searching` and `eating` an available cookie.
  version: 0.0.1
sourceDescriptions:
  - name: cookieApi
    url: http://localhost:8080/openapi.yaml
    type: openapi

workflows:
  - workflowId: retrieveCookieAndEatCookie
    summary: Retrieve cookie by an identifier and eat it
    description: This workflow lays out the steps to retrieve a cookie and then eat it.
    inputs:
      type: object
      properties:
        cookieId:
          type: number
    steps:
      - stepId: retrieveCookieStep
        description: This step demonstrates the retrieval of a cookie step.
        operationPath: '{$sourceDescriptions.cookieApi.url}#/paths/~1cookies~1{id}/get'
        operationId: findCookie
        parameters:
          # parameters to inject into the findCookie operation (parameter name must be resolvable at the referenced operation and the value is determined using {expression} syntax)
          - name: id
            in: path
            value: $inputs.cookieId
        successCriteria:
          # assertions to determine step was successful
          - condition: $statusCode == 200
        outputs:
          # outputs from this step
          cookieDto: $response.body
      - stepId: eatCookieStep
        description: Eat a cookie identified by its id.
        operationPath: '{$sourceDescriptions.cookieApi.url}#/paths/~1cookies~1{id}~1eat/post'
        operationId: findCookie
        parameters:
          - name: id
            in: path
            value: $inputs.cookieId
        successCriteria:
          - condition: $statusCode == 200
        outputs:
          # outputs from this step
          ateCookie: $response.body
    outputs:
      available: $steps.eatCookieStep.ateCookie
